import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.Random;

public class Poollmpl 
{
	private String poolId;
	private double temperature;
	private Map<String, Fish> fishPool;
	private List<Fish> fishList;
	private Random rand;
	private int fishNum = 5;
	
	public Poollmpl(String poolId)
	{
		this.poolId = poolId;
		rand = new Random();
		fishPool = new HashMap<>();
		fishList = new LinkedList<>();
		temperature = 10;
		init();
	}
	
	public void feedFish(int foodCount)
	{
		if (foodCount < 0)
		{
			return;
		}
		
		while (foodCount > 0)
		{
			int feedCount = rand.nextInt(foodCount+1);
			Fish fish = pickupFish();
			int actualEatNum = fish.feed(feedCount);
			foodCount -= actualEatNum;
		}
	}
	
	public boolean isFishHealthy(String fishId)
	{
		if (!fishPool.containsKey(fishId))
		{
			return false;
		}
		
		return fishPool.get(fishId).isHealthy();
	}
	
	public String checkFishsStatus()
	{
		StringBuilder builder = new StringBuilder();
		
		for (String fishId : fishPool.keySet())
		{
			builder.append(fishId).append(":").append(fishPool.get(fishId)).append("\n");
		}
		
		return builder.toString();
	}
	
	public String getPoolId() 
	{
		return poolId;
	}
	
	public double getTemperature() 
	{
		return temperature;
	}
	
	private void init()
	{
		for (int i = 0; i < fishNum; i++)
		{
			Fish fish = FishFactory.generateFish(FishType.GOLDFISH);
			fishPool.put(fish.getFishId(), new GoldFish(fish.getFishId()));
			fishList.add(fish);
		}
	}
	
	private Fish pickupFish()
	{
		int index = rand.nextInt(fishNum+1);
		return fishList.get(index);
	}
}
