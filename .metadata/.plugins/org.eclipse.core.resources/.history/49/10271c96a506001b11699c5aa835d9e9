import java.util.HashMap;
import java.util.Map;
import java.util.UUID;

import javax.management.InstanceNotFoundException;

public class PizzaShop 
{
	private Map<PizzaFlavor, Double> flavorToprice; 
	private Map<String, CustomerOrder> orderIdToOrder;
	
	private PizzaShop instance;
	
	private PizzaShop()
	{
		orderIdToOrder = new HashMap<>();
		
		flavorToprice = new HashMap<PizzaFlavor, Double>();
		flavorToprice.put(PizzaFlavor.PINEAPPLE, 5.99);
		flavorToprice.put(PizzaFlavor.PEPPER, 6.99);
		flavorToprice.put(PizzaFlavor.BEEF, 7.99);
	}
	
	public PizzaShop getInstance()
	{
		if (instance == null)
		{
			synchronized (instance) 
			{
				if (instance == null)
				{
					instance = new PizzaShop(); 
				}
			}
		}
		
		return instance;
	}
	
	public CustomerOrder placeOrder(String userName, PizzaFlavor flavor)
	{
		String orderId = UUID.randomUUID().toString();
		Pizza pizza = PizzaFactory.createPizza(flavor);
		CustomerOrder order = new CustomerOrder(orderId, userName, pizza);
		orderIdToOrder.put(orderId, order);
		return order;
	}
	
	public double checkPrice(PizzaFlavor flavor)
	{
		return flavorToprice.get(flavor);
	} 
}
