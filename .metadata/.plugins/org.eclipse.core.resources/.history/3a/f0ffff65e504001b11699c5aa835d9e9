import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class ParkingManager {
	private ParkingLot parkingLot;
	private Map<String, ParkingTicket> parkingTickets;
	private Map<String, Vehicle> vehicles;
	
	public ParkingManager(int parkingLotLevelNum, List<Integer> slotSizes, List<Integer> Capacities)
	{
		parkingLot = new ParkingLot(parkingLotLevelNum, slotSizes, Capacities);
		parkingTickets = new HashMap<>();
		vehicles = new HashMap<>();
	}
	
	public int hasAvailableSlots(int vehicleSize)
	{
		return parkingLot.getAvailableSpotsForGivenSize(vehicleSize);
	}
	
	public ParkingTicket generateParkingTicket(Vehicle vehicle)
	{
		if (hasAvailableSlots(vehicle.getSize()) == 0)
		{
			return null;
		}
		
		String slotId = parkingLot.parkVehicle(vehicle.getSize());
		
		if (slotId == null)
		{
			return null;
		}
		
		ParkingTicket ticket = new ParkingTicket(slotId, vehicle.getPlateNum());
		parkingTickets.put(ticket.getTicketId(), ticket);
		vehicles.put(vehicle.getPlateNum(), vehicle);
		return ticket;
	}
}
