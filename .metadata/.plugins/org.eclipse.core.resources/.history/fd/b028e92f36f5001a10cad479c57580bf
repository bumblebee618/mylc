import java.util.*;

/***
 * 
 * @author jackie
 * 
 * 
 */
public class Q974_Subarray_Sums_Divisible_by_K {
	public int subarraysDivByK(int[] nums, int K) {
        if (nums == null || nums.length == 0)
        {
            return 0;
        }
        
        int sum = 0;
        Map<Integer, List<Integer>> map = new HashMap<>();
        map.computeIfAbsent(0, x -> new LinkedList<Integer>()).add(-1);
        int result = 0;
        
        for (int i = 0; i < nums.length; i++)
        {
            sum += nums[i];
            sum %= K;
            int key = Math.abs(sum);
            
            if (map.containsKey(key))
            {
                List<Integer> list = map.get(key);
                result += list.size();
                System.out.println(result + "" + nums[i]);
                list.add(i);
                map.put(key, list);
            }
            else
            {
                List<Integer> list = new LinkedList<>();
                list.add(i);
                map.put(key, list);
            }
        }
        
        return result;
    }
	
	
	
	public static void main(String[] args)
	{
		Q974_Subarray_Sums_Divisible_by_K test = new Q974_Subarray_Sums_Divisible_by_K();
		int[] nums = new int[] {4, 5, 0, -2, -3, 1};
		int K = 5;
		System.out.println(test.subarraysDivByK(nums, K));
	}
}
